## ğŸ” Session Management (OTP Setup for Telethon)

AutoForwardX uses **Telethon user sessions** to read messages from private Telegram channels.

### ğŸ”§ How to Add a Session:

1. Run the session loader script:
   ```bash
   python3 telegram_reader/session_loader.py
Enter your phone number (e.g., +91xxxxxxxxxx)

Telegram sends you an OTP â†’ paste it into the terminal.

The session file is saved as gold_session_1.session

ğŸ“ Session Config Format:
Add the session to sessions.json:

json
Copy
Edit
{
  "gold_session_1": {
    "phone": "+91xxxxxxxxxx",
    "session_file": "gold_session_1.session",
    "status": "active"
  }
}
Each signal pair (in pairs.json) references a session:

json
Copy
Edit
"session": "gold_session_1"
âœ… You can use multiple .session files per Telegram account for load balancing.

ğŸ¤– Discord Bot Logic
The Discord bot complements webhooks and performs advanced tasks that webhooks canâ€™t:

âœ¨ Responsibilities:
Edit messages (via message ID mapping)

Delete trap messages

Detect bait edits (e.g., messages edited 3â€“4 times)

Relay trap alerts to the Admin Bot

Optionally rewrite messages using AI (GPT or local)

ğŸ›  Technologies:
discord.py

Connected to message_map.json for Telegram â†” Discord sync

ğŸ“¤ Telegram Poster Bot
The system supports multiple Telegram bots to post into your destination channels.

ğŸ¯ Why Multi-Bot?
Avoid rate limits

Isolate token bans

Assign different bot identity per pair

ğŸ›  Features:
Post new messages to channels

Edit or delete if source changes

Configurable per pair

ğŸ”§ Setup:
Store tokens in your .env file or use pairs.json:

json
Copy
Edit
"bot_token": "123456:ABCDEF...",
ğŸ§  Trap Detection & Auto-Pause Logic
AutoForwardX includes a flexible trap defense system.

ğŸ§ª Trap Types:
Text traps: / *, 1, leak, trap

Image traps: detected by OCR or MD5 hash

Edit traps: messages edited 3+ times

ğŸ”§ Behavior:
If traps exceed threshold (e.g., 3), the pair is auto-paused for 2â€“3 minutes

Admins receive a Telegram alert

System auto-resumes after cooldown

âš™ï¸ Webhook Management
Each pair is assigned a Discord Webhook URL:

Managed in Web UI (form or table view)

One webhook per Discord channel

Stored in pairs.json:

json
Copy
Edit
"discord_webhook": "https://discord.com/api/webhooks/..."
ğŸ“ Blocklist Scope: Global vs Per-Pair
Blocklists are defined in blocklist.json.

ğŸŒ Global Blocklist:
json
Copy
Edit
"global_blocklist": {
  "text": ["trap", "/ *"],
  "images": ["ab12cd34ef..."]
}
ğŸ¯ Per-Pair Blocklist:
json
Copy
Edit
"pair_blocklist": {
  "GBPUSD": {
    "text": ["1", "signal leaked"],
    "images": ["zz99yy88..."]
  }
}
ğŸ”§ Merging Logic:
The system merges both global and pair blocklists at runtime

If a text/image appears in either â†’ it's blocked

ğŸ“² Telegram Admin Bot
A dedicated Telegram bot provides inline admin control.

ğŸ’¬ Features:
[â¸ Pause Pair]

[â–¶ Resume Pair]

[ğŸ“‹ Show Blocklist]

[â• Add Word]

[âŒ Remove Word]

ğŸ“¢ Notifications:
Trap triggered

Pair auto-paused

Session OTP expired

ğŸ”§ Environment Config:
env
Copy
Edit
ADMIN_CHAT_ID=123456789
ADMIN_BOT_TOKEN=123456:ABCDEF...
ğŸ”„ Message Flow: Telegram â†’ Discord â†’ Telegram
ğŸ” End-to-End Lifecycle:
Userbot reads new message from source Telegram channel

Message is sent to Discord Webhook

Discord Bot monitors webhook channel:

AI rewrite

Trap detection

Edit/delete tracking

Cleaned message is sent to Telegram Posting Bot

If trap is detected â†’ Admin Bot is notified + pair is paused

If original Telegram message is edited/deleted â†’ change is synced to destination

ğŸ” Message ID Mapping:
Stored in message_map.json:

json
Copy
Edit
{
  "discord_msg_id": "abc123",
  "telegram_msg_id": 456,
  "pair": "GBPUSD"
}
